<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 380" font-family="Segoe UI, Arial, sans-serif">
  <!-- Background -->
  <rect width="700" height="380" fill="#2a2a2a"/>

  <!-- Title -->
  <text x="350" y="30" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="bold">Sync Bone の処理フロー</text>
  <text x="350" y="50" font-size="11" fill="#888" text-anchor="middle">足などのボーンの動きを物理ボーンに反映して貫通を防止</text>

  <!-- Flow diagram -->
  <!-- Step 1: Source Bone -->
  <g transform="translate(80, 80)">
    <rect width="160" height="100" fill="#1e1e1e" rx="5"/>
    <text x="80" y="25" font-size="11" fill="#fbbf24" text-anchor="middle" font-weight="bold">1. 同期元ボーン</text>
    <text x="80" y="42" font-size="9" fill="#888" text-anchor="middle">SyncSourceBone</text>

    <!-- Leg bone visualization -->
    <circle cx="80" cy="65" r="10" fill="#4a3c00" stroke="#fbbf24" stroke-width="2"/>
    <line x1="80" y1="75" x2="80" y2="95" stroke="#fbbf24" stroke-width="4"/>

    <!-- Movement arrow -->
    <path d="M 100 70 L 120 60" fill="none" stroke="#4ade80" stroke-width="2" marker-end="url(#arrowGreen)"/>
    <text x="130" y="60" font-size="8" fill="#4ade80">移動</text>
  </g>

  <!-- Arrow 1->2 -->
  <g transform="translate(250, 120)">
    <line x1="0" y1="0" x2="60" y2="0" stroke="#888" stroke-width="2"/>
    <polygon points="65,0 55,-5 55,5" fill="#888"/>
    <text x="30" y="-10" font-size="9" fill="#888" text-anchor="middle">位置・回転</text>
    <text x="30" y="20" font-size="9" fill="#888" text-anchor="middle">を取得</text>
  </g>

  <!-- Step 2: Sync Process -->
  <g transform="translate(330, 80)">
    <rect width="160" height="100" fill="#1e1e1e" stroke="#60a5fa" stroke-width="2" rx="5"/>
    <text x="80" y="25" font-size="11" fill="#60a5fa" text-anchor="middle" font-weight="bold">2. Sync Bone処理</text>

    <!-- Processing visualization -->
    <circle cx="50" cy="60" r="8" fill="#fbbf24" fill-opacity="0.5"/>
    <text x="50" y="80" font-size="8" fill="#888" text-anchor="middle">Source</text>

    <line x1="65" y1="60" x2="95" y2="60" stroke="#60a5fa" stroke-width="2" stroke-dasharray="3,2"/>

    <circle cx="110" cy="60" r="8" fill="#0080ff"/>
    <text x="110" y="80" font-size="8" fill="#888" text-anchor="middle">Target</text>

    <!-- SyncRatio label -->
    <text x="80" y="95" font-size="8" fill="#60a5fa" text-anchor="middle">SyncRatio適用</text>
  </g>

  <!-- Arrow 2->3 -->
  <g transform="translate(500, 120)">
    <line x1="0" y1="0" x2="60" y2="0" stroke="#888" stroke-width="2"/>
    <polygon points="65,0 55,-5 55,5" fill="#888"/>
    <text x="30" y="-10" font-size="9" fill="#888" text-anchor="middle">反映</text>
  </g>

  <!-- Step 3: Target Bones -->
  <g transform="translate(580, 80)">
    <rect width="100" height="100" fill="#1e1e1e" rx="5"/>
    <text x="50" y="25" font-size="11" fill="#4ade80" text-anchor="middle" font-weight="bold">3. 同期先</text>
    <text x="50" y="42" font-size="8" fill="#888" text-anchor="middle">SyncTargetBones</text>

    <!-- Skirt bones -->
    <circle cx="30" cy="65" r="6" fill="#0080ff"/>
    <circle cx="50" cy="70" r="6" fill="#0080ff"/>
    <circle cx="70" cy="65" r="6" fill="#0080ff"/>

    <text x="50" y="92" font-size="8" fill="#4ade80" text-anchor="middle">物理ボーン</text>
  </g>

  <!-- Before/After comparison -->
  <g transform="translate(80, 210)">
    <rect width="250" height="150" fill="#1e1e1e" rx="5"/>
    <text x="125" y="25" font-size="11" fill="#ff6b6b" text-anchor="middle" font-weight="bold">Sync Boneなし</text>

    <!-- Leg and skirt - penetrating -->
    <g transform="translate(125, 85)">
      <!-- Leg -->
      <ellipse cx="0" cy="0" rx="20" ry="50" fill="#555" stroke="#666" stroke-width="2"/>
      <text x="0" y="5" font-size="8" fill="#888" text-anchor="middle">足</text>

      <!-- Skirt bone (penetrating) -->
      <path d="M -60 -40 L -10 40" stroke="#ff6b6b" stroke-width="4"/>
      <circle cx="-10" cy="40" r="5" fill="#ff6b6b"/>

      <!-- X mark -->
      <g transform="translate(-20, 10)">
        <line x1="-8" y1="-8" x2="8" y2="8" stroke="#ff6b6b" stroke-width="3"/>
        <line x1="8" y1="-8" x2="-8" y2="8" stroke="#ff6b6b" stroke-width="3"/>
      </g>
    </g>

    <text x="125" y="145" font-size="9" fill="#ff6b6b" text-anchor="middle">スカートが足を貫通</text>
  </g>

  <g transform="translate(370, 210)">
    <rect width="250" height="150" fill="#1e1e1e" rx="5"/>
    <text x="125" y="25" font-size="11" fill="#4ade80" text-anchor="middle" font-weight="bold">Sync Boneあり</text>

    <!-- Leg and skirt - not penetrating -->
    <g transform="translate(125, 85)">
      <!-- Leg -->
      <ellipse cx="0" cy="0" rx="20" ry="50" fill="#555" stroke="#666" stroke-width="2"/>
      <text x="0" y="5" font-size="8" fill="#888" text-anchor="middle">足</text>

      <!-- Skirt bone (pushed away) -->
      <path d="M -60 -40 Q -50 0, -35 45" stroke="#4ade80" stroke-width="4"/>
      <circle cx="-35" cy="45" r="5" fill="#4ade80"/>

      <!-- Sync arrow -->
      <path d="M 5 -20 Q -15 -10, -30 10" fill="none" stroke="#60a5fa" stroke-width="2" stroke-dasharray="4,2"/>
      <text x="-5" y="-25" font-size="8" fill="#60a5fa">Sync</text>
    </g>

    <text x="125" y="145" font-size="9" fill="#4ade80" text-anchor="middle">足の動きに追従して貫通防止</text>
  </g>

  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4ade80"/>
    </marker>
  </defs>

  <!-- Bottom note -->
  <text x="350" y="375" font-size="10" fill="#888" text-anchor="middle">SyncRatioを調整して、同期の強さを制御できます（0.0〜1.0）</text>
</svg>