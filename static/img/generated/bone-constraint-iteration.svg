<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 750 300" font-family="Segoe UI, Arial, sans-serif">
  <!-- Background -->
  <rect width="750" height="300" fill="#2a2a2a"/>

  <!-- Title -->
  <text x="375" y="30" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="bold">Bone Constraint 反復処理の効果</text>
  <text x="375" y="50" font-size="11" fill="#888" text-anchor="middle">BoneConstraintIterationCount による収束の違い</text>

  <!-- Iteration 1 -->
  <g transform="translate(40, 70)">
    <rect width="200" height="200" fill="#1e1e1e" rx="5"/>
    <text x="100" y="25" font-size="12" fill="#ff6b6b" text-anchor="middle" font-weight="bold">反復 1回</text>
    <text x="100" y="42" font-size="10" fill="#888" text-anchor="middle">収束が不十分</text>

    <!-- Bones with poor constraint -->
    <g transform="translate(100, 120)">
      <!-- Waist reference -->
      <ellipse cx="0" cy="-30" rx="40" ry="10" fill="#444" stroke="#555" stroke-width="1"/>

      <!-- Skirt bones - spread unevenly -->
      <circle cx="-50" cy="20" r="6" fill="#0080ff"/>
      <circle cx="-15" cy="35" r="6" fill="#0080ff"/>
      <circle cx="20" cy="30" r="6" fill="#0080ff"/>
      <circle cx="55" cy="15" r="6" fill="#0080ff"/>

      <!-- Constraints (stretched/broken) -->
      <line x1="-50" y1="20" x2="-15" y2="35" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="4,2"/>
      <line x1="-15" y1="35" x2="20" y2="30" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="4,2"/>
      <line x1="20" y1="30" x2="55" y2="15" stroke="#ff6b6b" stroke-width="2" stroke-dasharray="4,2"/>

      <!-- Distance indicators -->
      <text x="-32" y="15" font-size="8" fill="#ff6b6b">長い</text>
      <text x="5" y="20" font-size="8" fill="#ff6b6b">短い</text>
      <text x="40" y="10" font-size="8" fill="#ff6b6b">長い</text>
    </g>

    <text x="100" y="185" font-size="9" fill="#ff6b6b" text-anchor="middle">距離がバラバラ</text>
  </g>

  <!-- Iteration 3 -->
  <g transform="translate(275, 70)">
    <rect width="200" height="200" fill="#1e1e1e" rx="5"/>
    <text x="100" y="25" font-size="12" fill="#fbbf24" text-anchor="middle" font-weight="bold">反復 3回</text>
    <text x="100" y="42" font-size="10" fill="#888" text-anchor="middle">ある程度収束</text>

    <!-- Bones with moderate constraint -->
    <g transform="translate(100, 120)">
      <!-- Waist reference -->
      <ellipse cx="0" cy="-30" rx="40" ry="10" fill="#444" stroke="#555" stroke-width="1"/>

      <!-- Skirt bones - more even -->
      <circle cx="-45" cy="25" r="6" fill="#0080ff"/>
      <circle cx="-15" cy="30" r="6" fill="#0080ff"/>
      <circle cx="15" cy="30" r="6" fill="#0080ff"/>
      <circle cx="45" cy="25" r="6" fill="#0080ff"/>

      <!-- Constraints (mostly equal) -->
      <line x1="-45" y1="25" x2="-15" y2="30" stroke="#fbbf24" stroke-width="2" stroke-dasharray="4,2"/>
      <line x1="-15" y1="30" x2="15" y2="30" stroke="#fbbf24" stroke-width="2" stroke-dasharray="4,2"/>
      <line x1="15" y1="30" x2="45" y2="25" stroke="#fbbf24" stroke-width="2" stroke-dasharray="4,2"/>
    </g>

    <text x="100" y="185" font-size="9" fill="#fbbf24" text-anchor="middle">ほぼ均等</text>
  </g>

  <!-- Iteration 5+ -->
  <g transform="translate(510, 70)">
    <rect width="200" height="200" fill="#1e1e1e" rx="5"/>
    <text x="100" y="25" font-size="12" fill="#4ade80" text-anchor="middle" font-weight="bold">反復 5回以上</text>
    <text x="100" y="42" font-size="10" fill="#888" text-anchor="middle">完全に収束</text>

    <!-- Bones with perfect constraint -->
    <g transform="translate(100, 120)">
      <!-- Waist reference -->
      <ellipse cx="0" cy="-30" rx="40" ry="10" fill="#444" stroke="#555" stroke-width="1"/>

      <!-- Skirt bones - perfectly even -->
      <circle cx="-42" cy="28" r="6" fill="#0080ff"/>
      <circle cx="-14" cy="30" r="6" fill="#0080ff"/>
      <circle cx="14" cy="30" r="6" fill="#0080ff"/>
      <circle cx="42" cy="28" r="6" fill="#0080ff"/>

      <!-- Constraints (equal length) -->
      <line x1="-42" y1="28" x2="-14" y2="30" stroke="#4ade80" stroke-width="2"/>
      <line x1="-14" y1="30" x2="14" y2="30" stroke="#4ade80" stroke-width="2"/>
      <line x1="14" y1="30" x2="42" y2="28" stroke="#4ade80" stroke-width="2"/>

      <!-- Equal distance indicators -->
      <text x="-28" y="18" font-size="8" fill="#4ade80">均等</text>
      <text x="0" y="18" font-size="8" fill="#4ade80">均等</text>
      <text x="28" y="18" font-size="8" fill="#4ade80">均等</text>
    </g>

    <text x="100" y="185" font-size="9" fill="#4ade80" text-anchor="middle">完全に均等</text>
  </g>

  <!-- Processing flow -->
  <g transform="translate(75, 280)">
    <text x="0" y="0" font-size="10" fill="#888">処理順序:</text>
    <rect x="80" y="-12" width="120" height="20" fill="#2d2d2d" stroke="#60a5fa" stroke-width="1" rx="3"/>
    <text x="140" y="3" font-size="9" fill="#60a5fa" text-anchor="middle">BeforeCollision</text>

    <text x="210" y="0" font-size="10" fill="#666">→</text>

    <rect x="230" y="-12" width="100" height="20" fill="#2d2d2d" stroke="#f472b6" stroke-width="1" rx="3"/>
    <text x="280" y="3" font-size="9" fill="#f472b6" text-anchor="middle">Collision処理</text>

    <text x="340" y="0" font-size="10" fill="#666">→</text>

    <rect x="360" y="-12" width="120" height="20" fill="#2d2d2d" stroke="#4ade80" stroke-width="1" rx="3"/>
    <text x="420" y="3" font-size="9" fill="#4ade80" text-anchor="middle">AfterCollision</text>

    <text x="500" y="0" font-size="10" fill="#888">（各段階で反復）</text>
  </g>
</svg>